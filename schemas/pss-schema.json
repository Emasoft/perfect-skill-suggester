{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PSS Skill Metadata File (.pss)",
  "description": "Per-skill metadata file for Perfect Skill Suggester, stored alongside each SKILL.md",
  "version": "2.0",
  "type": "object",
  "required": ["name", "type", "path", "description", "keywords"],
  "properties": {
    "name": {
      "type": "string",
      "description": "Skill name (kebab-case, matches directory name)"
    },
    "type": {
      "type": "string",
      "enum": ["skill", "agent", "command"],
      "description": "Component type"
    },
    "source": {
      "type": "string",
      "enum": ["user", "project", "plugin"],
      "description": "Where the skill is installed"
    },
    "path": {
      "type": "string",
      "description": "Full path to SKILL.md file"
    },
    "description": {
      "type": "string",
      "description": "VERBATIM copy of the skill's description from SKILL.md frontmatter - when to use this skill"
    },
    "use_cases": {
      "type": "array",
      "items": { "type": "string" },
      "description": "VERBATIM list of use cases extracted from SKILL.md"
    },
    "category": {
      "type": "string",
      "description": "Primary category from pss-categories.json (e.g., 'web-frontend', 'devops-cicd'). Categories are FIELDS OF COMPETENCE/USAGE (web design, ML training, code optimization, etc.) - used to build the CxC co-usage frequency matrix. Must be one of the 16 predefined categories."
    },
    "secondary_categories": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Additional categories this skill belongs to. Categories are broader domains, not specific tools."
    },
    "keywords": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Flat array of lowercase keywords/phrases for rio v2.0 matching. Keywords are a SUPERSET of categories - they include category terms PLUS specific tools, names, actions, technologies (chrome, next.js, git, pytest, docker, setup, configure, etc.). Used for prompt matching, not for matrix building."
    },
    "intents": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Action verbs: deploy, test, build, review, etc. (+4 points in scoring)"
    },
    "patterns": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Regex patterns for complex matching (+3 points)"
    },
    "directories": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Directory contexts where skill is relevant (+5 points)"
    },
    "path_patterns": {
      "type": "array",
      "items": { "type": "string" },
      "description": "File path patterns for matching"
    },
    "co_usage": {
      "type": "object",
      "description": "Co-usage information generated by Pass 2 agents",
      "properties": {
        "usually_with": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Skills typically used together with this skill"
        },
        "precedes": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Skills typically used BEFORE this skill"
        },
        "follows": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Skills typically used AFTER this skill"
        },
        "alternatives": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Alternative skills that solve similar problems"
        },
        "rationale": {
          "type": "string",
          "description": "AI-generated explanation of why these skills are co-used"
        }
      }
    },
    "tier": {
      "type": "string",
      "enum": ["primary", "secondary", "specialized"],
      "default": "secondary",
      "description": "Skill tier for boost scoring: primary (+5), secondary (0), specialized (-2)"
    },
    "boost": {
      "type": "integer",
      "minimum": -10,
      "maximum": 10,
      "default": 0,
      "description": "Manual score adjustment"
    },
    "generated": {
      "type": "string",
      "format": "date-time",
      "description": "When this .pss file was generated"
    },
    "pass": {
      "type": "integer",
      "description": "Which pass generated this: 1 = keywords only, 2 = with co-usage"
    }
  }
}
